<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>【玩转docker】反向代理神器：Nginx Proxy Manager | cyicz123的博客</title><meta name="keywords" content="docker,玩转docker,反向代理,nginx"><meta name="author" content="cyicz123"><meta name="copyright" content="cyicz123"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="【玩转docker】使用Nginx Proxy Manager反向代理实战教程">
<meta property="og:type" content="article">
<meta property="og:title" content="【玩转docker】反向代理神器：Nginx Proxy Manager">
<meta property="og:url" content="https://blog.cyicz123.top/posts/1ff9cff3/index.html">
<meta property="og:site_name" content="cyicz123的博客">
<meta property="og:description" content="【玩转docker】使用Nginx Proxy Manager反向代理实战教程">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://image.cyicz123.top/i/2022/06/02/klce7x-0.png">
<meta property="article:published_time" content="2022-06-17T07:45:21.000Z">
<meta property="article:modified_time" content="2022-10-14T14:12:29.741Z">
<meta property="article:author" content="cyicz123">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="玩转docker">
<meta property="article:tag" content="反向代理">
<meta property="article:tag" content="nginx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://image.cyicz123.top/i/2022/06/02/klce7x-0.png"><link rel="shortcut icon" href="https://image.cyicz123.top/i/2022/06/03/1skflq-0.png"><link rel="canonical" href="https://blog.cyicz123.top/posts/1ff9cff3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="vtqqXOAcv5Gefo8TtN9Vif-OYFKLG7a5PxyS8PsgH0Y"/><meta name="baidu-site-verification" content="code-NVknD7SdXy"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?91db1c990c79aee7a9c563188382c860";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-P8RP93D1Q6"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-P8RP93D1Q6');
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;e715f27998394a36959cfbc81b9b6d07&quot;}"></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":300,"languages":{"author":"作者: cyicz123","link":"链接: ","source":"来源: cyicz123的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '【玩转docker】反向代理神器：Nginx Proxy Manager',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-14 22:12:29'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/louztr-0.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 自诉</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://image.cyicz123.top/i/2022/06/02/klce7x-0.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">cyicz123的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 自诉</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【玩转docker】反向代理神器：Nginx Proxy Manager</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-17T07:45:21.000Z" title="发表于 2022-06-17 15:45:21">2022-06-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-14T14:12:29.741Z" title="更新于 2022-10-14 22:12:29">2022-10-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%8E%A9%E8%BD%ACdocker/">玩转docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="【玩转docker】反向代理神器：Nginx Proxy Manager"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/1ff9cff3/#post-comment"><span class="artalk-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="一、什么是反向代理？">一、什么是反向代理？</h2>
<p>众所周知，浏览器访问网页需要<code>域名:端口号</code> 或者<code>ip:端口号</code> 这种形式，而当你访问页面时不输入端口号时，浏览器会根据<code>http</code>协议或者<code>https</code>协议，自动在后面加上默认端口号<code>80</code>或者<code>443</code> 。</p>
<p>但是我这种小白使用服务器搭建服务时，一个服务器上往往有多种web服务。端口又不能复用，所以其他服务都是需要<code>域名:端口号</code> 或者<code>ip:端口号</code> 这种形式来访问。于是，我就有一个疑问了，能不能用不同的域名来对应不同的服务呢。</p>
<p>那这就是反向代理的作用了。</p>
<p>反向代理类似于一个菜鸟驿站。邮局（互联网）对于地址（域名）是每个咱们小区（服务器）的包裹（数据报文）都直接发给咱们小区的菜鸟驿站（反向代理服务器），然后菜鸟驿站根据每个包裹地址（域名）然后交付给咱们小区的具体家庭（服务器中的每一个服务）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/sbchy7-0.gif" alt="反向代理作用"></p>
<p>而Nginx则作为非常有名的反向代理web服务器，被广大站长采用。Nginx功能十分强大，但是配置对于小白来说，还是有一些门槛。那么有没有一款基于Nginx的web管理界面，来设置Nginx的反向代理呢？</p>
<p>这就是此篇博客要写的神器：Nginx Proxy Manager。</p>
<h2 id="二、Nginx-Proxy-Manager有什么功能？">二、Nginx Proxy Manager有什么功能？</h2>
<p>以下是Nginx Proxy Manager的官网介绍<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Nginx Proxy Manager官网](https://nginxproxymanager.com/)">[1]</span></a></sup></p>
<blockquote>
<p>This project comes as a pre-built docker image that enables you to easily forward to your websites running at home or otherwise, including free SSL, without having to know too much about Nginx or Letsencrypt.</p>
<p>该项目作为一个预构建的 docker 镜像提供，使您能够轻松地转发到在家里或其他地方运行的网站，包括免费的 SSL，而无需对 Nginx 或 Letsencrypt 有太多了解。</p>
</blockquote>
<p>它的功能总结起来就是以下几点：</p>
<ul>
<li>轻松的反向代理设置</li>
<li>轻松配置HTTPS</li>
<li>提供简单的访问权限设置</li>
</ul>
<p>好了，talk is cheap。接下来进入Nginx Proxy Manager一系列实战操作，让我们玩转Nginx Proxy Manager！</p>
<h2 id="三、Nginx-Proxy-Manager的安装">三、Nginx Proxy Manager的安装</h2>
<h3 id="1-前提">1. 前提</h3>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p><a href="https://blog.cyicz123.top/docker%E5%AE%89%E8%A3%85/">安装docker和docker-compose</a></p>
            </div>
<h3 id="2-安装">2. 安装</h3>
<p>ssh连接上服务器后，新建一个名为ngingx_proxy_manager的文件夹用来存放文件和数据（最好建一个统一存放各种docker容器应用的目录，例如本人命名为docker文件夹）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/docker/</span><br><span class="line"><span class="built_in">mkdir</span> ngingx_proxy_manager &amp;&amp; <span class="built_in">cd</span> ngingx_proxy_manager</span><br></pre></td></tr></table></figure>
<p>新建docker-compose.yml文件并复制以下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑文件</span></span><br><span class="line">vim docker-compose.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制以下内容</span></span><br><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  app:</span><br><span class="line">    image: <span class="string">&#x27;jc21/nginx-proxy-manager:latest&#x27;</span></span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    ports:</span><br><span class="line">      <span class="comment"># These ports are in format &lt;host-port&gt;:&lt;container-port&gt;</span></span><br><span class="line">      - <span class="string">&#x27;80:80&#x27;</span> <span class="comment"># Public HTTP Port</span></span><br><span class="line">      - <span class="string">&#x27;443:443&#x27;</span> <span class="comment"># Public HTTPS Port</span></span><br><span class="line">      - <span class="string">&#x27;81:81&#x27;</span> <span class="comment"># Admin Web Port</span></span><br><span class="line">      <span class="comment"># Add any other Stream port you want to expose</span></span><br><span class="line">      <span class="comment"># - &#x27;21:21&#x27; # FTP</span></span><br><span class="line">    environment:</span><br><span class="line">      DB_MYSQL_HOST: <span class="string">&quot;db&quot;</span></span><br><span class="line">      DB_MYSQL_PORT: 3306</span><br><span class="line">      DB_MYSQL_USER: <span class="string">&quot;npm&quot;</span></span><br><span class="line">      DB_MYSQL_PASSWORD: <span class="string">&quot;npm&quot;</span></span><br><span class="line">      DB_MYSQL_NAME: <span class="string">&quot;npm&quot;</span></span><br><span class="line">      <span class="comment"># Uncomment this if IPv6 is not enabled on your host</span></span><br><span class="line">      <span class="comment"># DISABLE_IPV6: &#x27;true&#x27;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - ./data:/data</span><br><span class="line">      - ./letsencrypt:/etc/letsencrypt</span><br><span class="line">    depends_on:</span><br><span class="line">      - db</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: <span class="string">&#x27;jc21/mariadb-aria:latest&#x27;</span></span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_ROOT_PASSWORD: <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">      MYSQL_DATABASE: <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">      MYSQL_USER: <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">      MYSQL_PASSWORD: <span class="string">&#x27;npm&#x27;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/mysql:/var/lib/mysql</span><br></pre></td></tr></table></figure>
<p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
<p>在确保云服务器防火墙已经放行80、81和443端口后即可访问服务器<code>ip:81</code> 进入ngingx_proxy_manager的web管理界面。默认密码为：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Email:</span>    <span class="string">admin@example.com</span></span><br><span class="line"><span class="attr">Password:</span> <span class="string">changeme</span></span><br></pre></td></tr></table></figure>
<p>输入密码，进入后台后会强制要求更改用户名和密码。</p>
<h2 id="实战一、设置后台管理界面的反向代理">实战一、设置后台管理界面的反向代理</h2>
<p>在前文中，已介绍了反向代理的作用，即常见的需求是输入<code>ip:port</code> 形式访问界面太不优雅，并且无法设置https，因此需要用一个域名与此绑定。用户浏览器输入域名，服务器会根据此域名自动转发请求报文到对应绑定的<code>ip:port</code> 服务，然后将响应报文回复给用户。</p>
<p>这里，我们就用a.test.com来绑定我们的端口号为81的后台管理界面，实现浏览器输入a.test.com即可访问后台管理界面，并且设置HTTPS。</p>
<h3 id="1-前提-2">1. 前提</h3>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>安装好Nginx Proxy Manager</p>
            </div> 
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>拥有一个域名</p>
            </div>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>将a.test.com解析到安装Nginx Proxy Manager的服务器ip地址上</p>
            </div>
<h3 id="2-反向代理操作">2. 反向代理操作</h3>
<p>先用<code>ip:81</code> 访问后台管理界面，然后输入账号密码进入后台。</p>
<p>点击绿色图标的选项</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/xhsdwe-0.png" alt="设置反向代理"></p>
<p>点击右边<code>Add Proxy Host</code> ，在弹出的界面<code>Details</code>选项中填写相应的字段。</p>
<div class="note info simple"><ul>
<li>Domain Names: 填写要反向代理的域名，<a target="_blank" rel="noopener" href="http://xn--a-ll2b480a6o7bkbc.test.com">这里就是a.test.com</a></li>
<li>Forward Hostname / IP: 填写的ip值见下文解释👇</li>
<li>Forward Port: 反向代理的端口，这里就是81</li>
<li>Block Common Exploits: 开启后阻止一些常见漏洞</li>
<li>其余两个暂不知作用</li>
</ul>
</div>
<details class="folding-tag" cyan><summary> Forward Hostname / IP填写说明 </summary>
              <div class='content'>
              <p>如果搭建的服务和nginx proxy manager服务所在不是一个服务器，则填写能访问对应服务的IP。</p><p>如果都在同一台服务器上，则填写在服务器中输入<code>ip addr show docker0</code> 命令获取得到的ip。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/yr1f0z-0.png" alt="查看宿主机ip"></p><p>这里不填<code>127.0.0.1</code>的原因是使用的是docker容器搭建web应用，docker容器和宿主机即服务器不在同一个网络下，所以<code>127.0.0.1</code> 并不能访问到宿主机，而<code>ip addr show docker0</code> 获得的ip地址就是宿主机地址。</p>
              </div>
            </details>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/z4mp9f-0.png" alt="反代设置细节"></p>
<p>接下来即可用<code>a.test.com</code> 访问后台管理界面，此时还只是http协议，没有https。不过此时就可以把之前的81端口关闭了，输入<code>a.test.com</code> 访问的是服务器<code>80</code>端口，然后在转发给内部的81端口。</p>
<h3 id="3-申请泛域名ssl证书">3. 申请泛域名ssl证书</h3>
<p>就是申请一个<code>*.test.com</code> 证书，这样二级域名无论是什么都可以用这个证书，不需要一个二级域名申请一个。</p>
<p>在Nginx Proxy Manager管理后台，选择<code>Access Lists</code>-&gt;<code>Add SSL Certificate</code>-&gt;<code>Let's Encrypt</code>选项。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/zb8voj-0.png" alt="SSL管理"></p>
<p>Domain Names中填写<code>*.test.com</code> <code>test.com</code> ，打开<code>Use a DNS Challenge</code> 选项，并选择个人域名的DNS解析服务商（本人就是腾讯的DNSPod），最后填入服务商提供的api key或者token。</p>
<details class="folding-tag" cyan><summary> DNSPod的id，key获取教程 </summary>
              <div class='content'>
              <ol><li>进入<a target="_blank" rel="noopener" href="https://console.dnspod.cn/">DNSPod控制台</a></li><li>步骤直接看图</li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/zjssm8-0.png" alt="DNSPod密钥管理"></p><ol><li>随便取一个名字后，复制ID和Token到对应位置。</li></ol><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/10fnoog.png" alt="获取密钥"></p>
              </div>
            </details>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/zeepll-0.png" alt="SSL全部设置"></p>
<h3 id="4-设置HTTPS">4. 设置HTTPS</h3>
<p>进入反向代理设置界面，编辑上文创建的反代服务，选择SSL选项，下拉菜单中选择我们申请的证书，然后可以勾选<code>Force SSL</code>即强制HTTPS。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/zo83wu-0.png" alt="选择相应的证书"></p>
<p>同理以后新创建的反向代理可以直接在SSL选项中选择我们刚刚申请的泛域名证书。</p>
<h2 id="实战二、搭建服务器监控并用NPM设置密码访问">实战二、搭建服务器监控并用NPM设置密码访问</h2>
<p>下面再通过用docker搭建的小而美的服务器监控，来介绍Nginx Proxy Manager添加权限访问的操作。<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/24/12ngj3t-0.png" alt="ward服务器状态监控界面"></p>
<h3 id="1-小而美的服务器状态监控：ward">1. 小而美的服务器状态监控：ward</h3>
<blockquote>
<p>Ward is a simple and and minimalistic server monitoring tool. Ward supports adaptive design system. Also it supports dark theme. It shows only principal information and can be used, if you want to see nice looking dashboard instead looking on bunch of numbers and graphs. Ward works nice on all popular operating systems, because it uses OSHI.<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Ward github](https://github.com/Rudolf-Barbu/Ward)">[2]</span></a></sup></p>
<p>Ward是一个简单且最低限度的服务器监控工具。Ward支持自适应设计系统。它还支持黑暗主题。如果您想看到漂亮的仪表板，而不是查看一堆数字和图形，那么它只显示主要信息，并且可以使用。Ward在所有流行的操作系统上都运行良好，因为它使用<a target="_blank" rel="noopener" href="https://github.com/oshi/oshi">OSHI</a>。</p>
</blockquote>
<h3 id="2-前提">2. 前提</h3>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>安装好Nginx Proxy Manager</p>
            </div> 
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>拥有一个域名</p>
            </div>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>将b.test.com解析到安装Nginx Proxy Manager的服务器ip地址上</p>
            </div>
<h3 id="3-安装">3. 安装</h3>
<p>ssh连接上服务器后，新建一个名为ward的文件夹用来存放文件和数据（最好建一个统一存放各种docker容器应用的目录，例如本人命名为docker文件夹）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/docker/</span><br><span class="line"><span class="built_in">mkdir</span> ward &amp;&amp; <span class="built_in">cd</span> ward</span><br></pre></td></tr></table></figure>
<p>新建docker-compose.yml文件并复制以下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑文件</span></span><br><span class="line">vim docker-compose.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制以下内容</span></span><br><span class="line">version: <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line">services:</span><br><span class="line">    run:</span><br><span class="line">        restart: unless-stopped</span><br><span class="line">        container_name: ward</span><br><span class="line">        ports:</span><br><span class="line">            - <span class="string">&#x27;4000:4000&#x27;</span> <span class="comment"># 第一个4000表示外部可访问的端口，可修改</span></span><br><span class="line">        environment:</span><br><span class="line">            - WARD_PORT=4000 <span class="comment"># 和上面后一个端口号相同</span></span><br><span class="line">            - WARD_THEME=dark <span class="comment"># 可选light或者dark</span></span><br><span class="line">            - WARD_NAME=leons-server <span class="comment"># 网站名称，可修改</span></span><br><span class="line">        privileged: <span class="literal">true</span></span><br><span class="line">        image: antonyleons/ward</span><br></pre></td></tr></table></figure>
<p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>
<h3 id="4-设置反向代理和ssl">4. 设置反向代理和ssl</h3>
<p>打开Nginx Proxy Manager的管理页面。<br>
新建反向代理，<code>Detail</code>如下填写</p>
<div class="note info simple"><ul>
<li>Domain Names: 填写要反向代理的域名，<a target="_blank" rel="noopener" href="http://xn--b-ll2b480a6o7bkbc.test.com">这里就是b.test.com</a></li>
<li>Forward Hostname / IP: 填写的ip值见下文解释👇</li>
<li>Forward Port: 反向代理的端口，这里就是4000</li>
</ul>
</div>
<details class="folding-tag" cyan><summary> Forward Hostname / IP填写说明 </summary>
              <div class='content'>
              <p>如果搭建的服务和nginx proxy manager服务所在不是一个服务器，则填写能访问对应服务的IP。</p><p>如果都在同一台服务器上，则填写在服务器中输入<code>ip addr show docker0</code> 命令获取得到的ip。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/20/yr1f0z-0.png" alt="查看宿主机ip"></p><p>这里不填<code>127.0.0.1</code>的原因是使用的是docker容器搭建web应用，docker容器和宿主机即服务器不在同一个网络下，所以<code>127.0.0.1</code> 并不能访问到宿主机，而<code>ip addr show docker0</code> 获得的ip地址就是宿主机地址。</p>
              </div>
            </details>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/22/zodwi7-0.png" alt="detail设置"><br>
<code>SSL</code>选项选择自己申请的泛域名证书。<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/22/zp18qd-0.png" alt="ssl设置"></p>
<h3 id="5-权限设置">5. 权限设置</h3>
<p>在Nginx Proxy Manager管理首页，选<code>Access Lists</code>页面-&gt;点击<code>Add Access List</code>。</p>
<p><code>Detail</code>页面</p>
<div class="note info simple"><ul>
<li>Name: 这个权限设置的名称</li>
<li>Satisfy Any: <code>Access</code>选项条件满足任意即可访问</li>
<li>Pass Auth to Host: 暂不知作用</li>
</ul>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/22/10lpi3e-0.png" alt="detail设置"></p>
<p><code>Authorization</code><br>
可设置多个账户密码</p>
<p><code>Access</code><br>
可设置ip白、黑名单。</p>
<p>最后保存即可，然后在设置反向代理界面<code>Details</code>-&gt;<code>Access List</code>选择刚刚设置的权限选项。<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/22/10zk0a1-0.png" alt="权限设置"></p>
<p>以后想设置权限的都可以选择该权限选项。</p>
<p>最后效果如下<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/24/12mf0gm-0.png" alt="权限登陆"></p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://nginxproxymanager.com/">Nginx Proxy Manager官网</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://github.com/Rudolf-Barbu/Ward">Ward github</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li></ol></div></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.cyicz123.top">cyicz123</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.cyicz123.top/posts/1ff9cff3/">https://blog.cyicz123.top/posts/1ff9cff3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.cyicz123.top" target="_blank">cyicz123的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/docker/">docker</a><a class="post-meta__tags" href="/tags/%E7%8E%A9%E8%BD%ACdocker/">玩转docker</a><a class="post-meta__tags" href="/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/">反向代理</a><a class="post-meta__tags" href="/tags/nginx/">nginx</a></div><div class="post_share"><div class="social-share" data-image="https://image.cyicz123.top/i/2022/06/02/klce7x-0.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/4d01e9bf/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klhwru-0.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【玩转docker】docker和docker-compose多平台安装</div></div></a></div><div class="next-post pull-right"><a href="/posts/66e43908/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klheo5-0.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">千字深入浅出C语言指针</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/4d01e9bf/" title="【玩转docker】docker和docker-compose多平台安装"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klhwru-0.png" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2022-10-14</div><div class="title">【玩转docker】docker和docker-compose多平台安装</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Artalk</span><span class="switch-btn"></span><span class="second-comment">Waline</span></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/louztr-0.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">cyicz123</div><div class="author-info__description">个人技术分享</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cyicz123"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/cyicz123" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:cyicz123@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.zhihu.com/people/cyicz123.top/posts" target="_blank" title="知乎"><i class="fa-brands fa-zhihu"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to cyicz123's blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%9F"><span class="toc-text">一、什么是反向代理？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Nginx-Proxy-Manager%E6%9C%89%E4%BB%80%E4%B9%88%E5%8A%9F%E8%83%BD%EF%BC%9F"><span class="toc-text">二、Nginx Proxy Manager有什么功能？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Nginx-Proxy-Manager%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">三、Nginx Proxy Manager的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%8D%E6%8F%90"><span class="toc-text">1. 前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85"><span class="toc-text">2. 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E4%B8%80%E3%80%81%E8%AE%BE%E7%BD%AE%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%E7%9A%84%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-text">实战一、设置后台管理界面的反向代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%8D%E6%8F%90-2"><span class="toc-text">1. 前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%93%8D%E4%BD%9C"><span class="toc-text">2. 反向代理操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%94%B3%E8%AF%B7%E6%B3%9B%E5%9F%9F%E5%90%8Dssl%E8%AF%81%E4%B9%A6"><span class="toc-text">3. 申请泛域名ssl证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AE%BE%E7%BD%AEHTTPS"><span class="toc-text">4. 设置HTTPS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E4%BA%8C%E3%80%81%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E5%B9%B6%E7%94%A8NPM%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E8%AE%BF%E9%97%AE"><span class="toc-text">实战二、搭建服务器监控并用NPM设置密码访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%B0%8F%E8%80%8C%E7%BE%8E%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8A%B6%E6%80%81%E7%9B%91%E6%8E%A7%EF%BC%9Award"><span class="toc-text">1. 小而美的服务器状态监控：ward</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%89%8D%E6%8F%90"><span class="toc-text">2. 前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85"><span class="toc-text">3. 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AE%BE%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8Cssl"><span class="toc-text">4. 设置反向代理和ssl</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE"><span class="toc-text">5. 权限设置</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/782176d8/" title="【玩转Docker】Docker替代Anaconda进行Python开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klfb23-0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【玩转Docker】Docker替代Anaconda进行Python开发"/></a><div class="content"><a class="title" href="/posts/782176d8/" title="【玩转Docker】Docker替代Anaconda进行Python开发">【玩转Docker】Docker替代Anaconda进行Python开发</a><time datetime="2022-10-14T15:06:17.889Z" title="更新于 2022-10-14 23:06:17">2022-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1ff9cff3/" title="【玩转docker】反向代理神器：Nginx Proxy Manager"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klce7x-0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【玩转docker】反向代理神器：Nginx Proxy Manager"/></a><div class="content"><a class="title" href="/posts/1ff9cff3/" title="【玩转docker】反向代理神器：Nginx Proxy Manager">【玩转docker】反向代理神器：Nginx Proxy Manager</a><time datetime="2022-10-14T14:12:29.741Z" title="更新于 2022-10-14 22:12:29">2022-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d01e9bf/" title="【玩转docker】docker和docker-compose多平台安装"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klhwru-0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【玩转docker】docker和docker-compose多平台安装"/></a><div class="content"><a class="title" href="/posts/4d01e9bf/" title="【玩转docker】docker和docker-compose多平台安装">【玩转docker】docker和docker-compose多平台安装</a><time datetime="2022-10-14T14:09:38.521Z" title="更新于 2022-10-14 22:09:38">2022-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/66e43908/" title="千字深入浅出C语言指针"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klheo5-0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="千字深入浅出C语言指针"/></a><div class="content"><a class="title" href="/posts/66e43908/" title="千字深入浅出C语言指针">千字深入浅出C语言指针</a><time datetime="2022-10-12T12:29:00.805Z" title="更新于 2022-10-12 20:29:00">2022-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4a17b156/" title="Hello World"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://image.cyicz123.top/i/2022/06/02/klheo5-0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/posts/4a17b156/" title="Hello World">Hello World</a><time datetime="2022-10-12T12:29:00.804Z" title="更新于 2022-10-12 20:29:00">2022-10-12</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient( 135deg, #ABDCFF 10%, #0396FF 100%)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By cyicz123</div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>闽ICP备20002716号-3号</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addArtalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/artalk/dist/Artalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadArtalk () {
  function initArtalk () {
    window.artalkItem = new Artalk(Object.assign({
      el: '#artalk-wrap',
      server: 'https://artalk.cyicz123.top',
      site: 'cyicz123',
      pageKey: location.pathname,
      darkMode: document.documentElement.getAttribute('data-theme') === 'dark',
      countEl: '.artalk-count'
    },null))
  }

  if (typeof window.artalkItem === 'object') setTimeout(()=>{initArtalk()},200)
  else {
    addArtalkSource()
    typeof Artalk !== 'function' ? getScript('https://cdn.jsdelivr.net/npm/artalk/dist/Artalk.min.js').then(initArtalk)
                                : setTimeout(()=>{initArtalk()},200)
  }
}

document.getElementById('darkmode').addEventListener('click',()=> {
  if (typeof window.artalkItem !== 'object') return
  let isDark = document.documentElement.getAttribute('data-theme') === 'dark'
  window.artalkItem.setDarkMode(!isDark)
})


if ('Artalk' === 'Artalk' || !false) {
  if (false) btf.loadComment(document.getElementById('artalk-wrap'), loadArtalk)
  else loadArtalk()
} else {
  function loadOtherComment () {
    loadArtalk()
  }
}</script><script>function loadWaline () {
  function insertCSS () {
    const link = document.createElement("link")
    link.rel = "stylesheet"
    link.href = "https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css"
    document.head.appendChild(link)
  }

  function initWaline () {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://comments.cyicz123.top',
      pageview: true,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: true,
    }, null))
  }

  if (typeof Waline === 'function') initWaline()
  else {
    insertCSS()
    getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js').then(initWaline)
  }
}

if ('Artalk' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" style="margin-inline:5px" data-title="本站使用又拍云为全站提供CDN加速" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN%E5%8A%A0%E9%80%9F-%E5%8F%88%E6%8B%8D%E4%BA%91-blue" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>